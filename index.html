<!DOCTYPE html>
<html lang="en">
<head>
       <meta charset="UTF-8">
       <meta name="viewport" content="width=device-width, initial-scale=1.0">
       <link rel="stylesheet" href="./style.css">
       <title>Login</title>
</head>
<body>
       <div class="main">
              <form action="" method="post" class="form" id="form-1">
                     <br>
                     <br>
              <h3 class="logo-text" style="font-size: 30px">Đăng Ký</h3>
              <div class="spacer"></div>
              <div class="form-group">
                     <label for="fullname" class="form-label">Tên đầy đủ</label>
                     <input id="fullname" name="fullname" type="text" placeholder="vd:nguyenvan">
                     <br>
                     <span id="error_name" class="form-message"></span>
              </div>
              <div class="form-group">
                     <label for="email" class="form-label">Email</label>
                     <input onclick="" id="email" name="email" type="email" placeholder="vd:nam@gmail.com">
                     <br>
                     <span id="error_email" class="form-message"></span>
              </div>
              <div class="form-group">
                     <label for="password" class="form-label">Password</label>
                     <input id="password" name="password" type="password" placeholder="Nhập mật khẩu">
                     <br>
                     <span id="error_pass" class="form-message"></span>
              </div>
              <div class="form-group">
                     <label for="repassword" class="form-label">Re-Password</label>
                     <input id="repassword" name="repassword" type="password" placeholder="Nhập lại mật khẩu">
                     <br>
                     <span id="error_repass" class="form-message"></span>
                     <br>
              </div >
              <br>
              <button  class="btn" type="button">
                     <strong id="submit">Đăng ký</strong>
                     <div id="container-stars">
                       <div id="stars"></div>
                     </div>
                   
                     <div id="glow">
                       <div class="circle"></div>
                       <div class="circle"></div>
                     </div>
                   </button>
              <br>
              <div class="icon1">
                     <div class="ion--logo-html5"></div>
                     <div class="ion--logo-css3"></div>
                     <div class="ion--logo-javascript"></div>
                     <div class="radix-icons--github-logo"></div>
              </div>
              <div class="warring"><p id="warring">...</p></div>
              </form>
       </div>


<script>

const submit = document.querySelector("#submit");
// Gán sự kiện onclick vào nút submit
submit.onclick = function() {

    var isValid = true;

    // Kiểm tra và gán giá trị cho biến isValid
    isValid = checkName() && isValid;
    isValid = checkEmail() && isValid;
    isValid = checkPass() && isValid;
    isValid = checkRepass() && isValid;

    // Nếu tất cả các kiểm tra đều hợp lệ, hiển thị thông báo thành công
    if (isValid) {
        alert("Bạn đã đăng ký thành công");
        alert("Email sẽ sớm gửi về máy bạn")
    }else{
       // Hoặc sử dụng window.location.reload()
       document.querySelector("#warring").innerHTML = " Warring: sau 5s sẽ reset website"
       setTimeout(() => {
              window.location.reload()
       }, 5000);

    }
}

// Hàm kiểm tra tên
function checkName() {
    const nameInput = document.querySelector("#fullname");
    const fullNameRegex = /^[^\d\s]+(\s+[^\d\s]+){1,}$/;
    const errName = !fullNameRegex.test(nameInput.value);
    const errorNameElement = document.querySelector("#error_name");
    
    if (errName) {
        errorNameElement.innerHTML = "Vui lòng nhập lại tên";
        return false;
    } else {
        errorNameElement.innerHTML = "";
        return true;
    }
}

// Hàm kiểm tra email
function checkEmail() {
    const emailInput = document.querySelector("#email");
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    const errEmail = !emailRegex.test(emailInput.value);
    const errorEmailElement = document.querySelector("#error_email");

    if (errEmail) {
        errorEmailElement.innerHTML = "Vui lòng nhập lại email";
        return false;
    } else {
        errorEmailElement.innerHTML = "";
        return true;
    }
}

// Hàm kiểm tra mật khẩu
function checkPass() {
    const passInput = document.querySelector("#password");
    const passwordRegex = /^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/;
    const errPass = !passwordRegex.test(passInput.value);
    const errorPassElement = document.querySelector("#error_pass");

    if (errPass) {
        errorPassElement.innerHTML = "Vui lòng nhập lại mật khẩu";
        return false;
    } else {
        errorPassElement.innerHTML = "";
        return true;
    }
}

// Hàm kiểm tra repass
function checkRepass() {
    const repassInput = document.querySelector("#repassword");
    const passInput = document.querySelector("#password");
    const errRepass = repassInput.value.length < 8 || repassInput.value !== passInput.value;
    const errorRepassElement = document.querySelector("#error_repass");

    if (errRepass) {
        errorRepassElement.innerHTML = "Mật khẩu repass chưa chính xác";
        return false;
    } else {
        errorRepassElement.innerHTML = "";
        return true;
    }
}

       if (checkname() && checkemail() && checkpass() && checkrepass()) {
        alert("Bạn đã đăng ký thành công");
    }


       
       
       
</script>

       <script src="./main.js"></script>
</body>
</html>